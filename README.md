
뽀송길v1 최종보고서 [캡스1_최종보고서(2023.07.19).pdf](https://github.com/gyangho/pposong_route_v1/files/14506795/1_.2023.07.19.pdf)


# 목차

- 뽀송길 설명
    - 뽀송길은 비 오는 날, 대중교통을 이용할 때 뽀송하게 이동할 수 있도록 지도상에 기상정보를 시각적으로 표현하고 사용자가 선택한 경로를 기반으로  출발 시각에 따른 강수량을 알려주는 프로젝트 입니다.
- 결과
    - 메인 화면
        
       <img width="1466" alt="Untitled (1)" src="https://github.com/gyangho/pposong_route_v1/assets/52252845/53370a8d-bddb-4a12-96bc-324b2392d511">

        
        - 즐겨찾기 : 이전에 사용자가 저장한 경로를 보여 준다.
        - GPS : 현재 자신의 위치를 지도에 표현한다.
        - 검색 : kakao API, Jquery의 autocomplete 이용해 사용자가 입력하는 장소의 리스트들을 출력한다.
        - 버튼 : 사이트 접속한 시각 기준 1시간 간격 6개의 시각을 나타낸다, 기상청에서 받아온 강수 데이터들을 지도에 표현해 사용자들이 직관적으로 강수 정보를 얻을 수 있다.
    - 결과
        
        <img width="708" alt="Untitled (2)" src="https://github.com/gyangho/pposong_route_v1/assets/52252845/91ce0d67-c88b-480a-8801-af520ae0b252">

        
        - ODsay API 이용하여 사용자가 입력한 출발지 ~ 도착지의 대중교통 정보들을 출력한다.
        - ‘별’을 클릭해 즐겨찾기에 저장 할 수 있다.
        - 사용자에게 경로 선택권을 준다.
    - 뽀송타임
        <img width="294" alt="Untitled (3)" src="https://github.com/gyangho/pposong_route_v1/assets/52252845/fb1c60f6-c27f-4bf5-821c-d325c768e65f">

        
        - 사용자가 경로를 선택하면 넘어가는 화면으로 상단에는 지도, 하단에는 버튼(30분 간격 출발 시각, 해당 시각의 총 강수량), 경로 정보가 있다.
        - 지도
            - 경로와 각 도보 구간에서의 날씨 정보를 출력하여 직관적으로 확인할 수 있다.
        - 버튼
            - 현재 시각 기준 30분 간격인 4개의 시각과 해당 시각에 출발 했을때 맞게되는 총 강수량이 버튼에 표현되었다.
            - 버튼을 클릭하면 지도의 각 도보 구간에 예상되는 날씨 정보가 표현된다.
        - 경로
            - 간단한 경로 정보를 표현하였다.
- 구현
    - API GATEWAY
        - Nginx 이용해 리버스 프록시 서버 구성하였다. 
    - 최신 데이터
        - 사용자에게 실시간으로 변하는 날씨 정보를 제공하기 위해 뽀송길은 기상청의 초단기 예보, 초단기 실황을 기반으로 날씨 정보를 제공합니다. 하지만 초단기 예보는 40분에 검색 시간 이후 6시간 날씨 예보를, 초단기 실황은 45분에 현재 시각의 날씨 정보를 발표합니다. 이러한 API의 특성으로 최신의 데이터를 사용해  정보를 제공하기 어려웠습니다. 이에 따라 40분, 45분을 기준으로 날씨 데이터 수집 방법을 다르게 적용하였고, 서로 다른 시각에 발표되는 API를 조합하여 데이터를 상호 보완함으로써 항상 최신 데이터가 데이터베이스에 저장할 수 있었습니다.
            <img width="553" alt="Untitled (4)" src="https://github.com/gyangho/pposong_route_v1/assets/52252845/b72f4250-2a00-4ea4-b579-a0336065cdec">
            
            ex) 12:00~13:00 활용 API
            <img width="930" alt="Untitled (5)" src="https://github.com/gyangho/pposong_route_v1/assets/52252845/24f05f20-3d9f-4e23-8259-0b520427a60f">

            
    - 비동기
        - 10분마다 기상청 API로 날씨 정보들을 받아와야 했고 데이터 수집 범위를 서울로 한정 했지만 데이터 수집에 긴 시간이 소요되었다.
            <img width="421" alt="Untitled (6)" src="https://github.com/gyangho/pposong_route_v1/assets/52252845/65b62cb4-b039-4aa7-8f6f-e1fbaa7d2503">
            
            추후 프로젝트를 전국으로 확장할 경우 더 많은 시간이 소요될것으로 보였고 이를 해결하기 위해 자바스크립트의 Promise, Promise.all을 이용해 비동기적으로 처리하여 속도를 개선하였다. 또한 하나라도 실패하면 작업이 중단되는 Promise.all의 기능을 방지하기 위해 에러가 발생한 경우, 해당 API를 최대 3번까지 재시도하는 에러 핸들링을 추가해 안정성을 높였다.
            <img width="375" alt="Untitled (7)" src="https://github.com/gyangho/pposong_route_v1/assets/52252845/6d862dd5-820a-4ba9-8432-c672f11c9047">
            
- 회고
    - 뽀송길 프로젝트를 하면서 많이 성장하였다 (백-프론트 협업, 환경설정의 중요성,  이론적으로 배운 구현 전 분석-설계의 중요성, 확장성, 재사용성 높은 프로그램)
- 다음 캡스톤 목표
    - 서울을 넘어 전국 지도
        - 대용량 데이터를 다루기 위해 서울로 제한된 프로젝트 범위를 전국으로 확장해 나갈것입니다.
    - 실시간 대중교통
        - 경로만 알려주는 기존 결과창에 실시간 대중교통 정보를 추가해 좀 더 나은 편의성을 제공할것입니다.
    - 강수 말고 다른 정보(기온, 풍속, 미세먼지)들도 표현
        - 비가 오지 않는 날에도 활용할 수 있게 다른 기상 정보들도 추가할 예정입니다.
    - CCH를 이용해 기상정보에 따른 가중치를 도보경로
        - 현재 길찾기 애플리케이션에서는 CCH 알고리즘을 활용하고 있습니다. CCH은 최적 경로를 빠르게 탐색하되 도로 유형별, 시설물 진입 패널티, turn costs 등을 가중치로 둘 수 있는 Customization 기능이 있는 알고리즘입니다. 기존 길찾기 애플리케이션과 다르게 뽀송길에서는 기상 정보를 가중치로 두어 뽀송하게 이동할 수 있는 최적 경로를 탐색해 사용자에게 제공할 것입니다.
